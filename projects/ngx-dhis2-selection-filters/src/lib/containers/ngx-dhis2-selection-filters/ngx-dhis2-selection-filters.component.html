<div class="selection-filter-container">
  <!--selection filter header-->
  <div class="selection-filter-header">
    <button
      mat-stroked-button
      class="selection-filter-btn"
      (click)="onToggleFilter($event)"
      [title]="'Filter by different dimensions' | translate"
    >
      <i class="fa fa-filter mr-2"></i>
      <span>Filter</span>
      <i
        class="fa {{ showFilters ? 'fa-caret-left' : 'fa-caret-right' }} ml-2"
      ></i>
    </button>
    <div class="selection-filter-btn-list" *ngIf="showFilters">
      <!--data filter button-->
      <button
        mat-stroked-button
        class="selection-filter-btn"
        *ngIf="selectionFilterConfig?.showDataFilter"
        color="{{ selectedFilter === 'DATA' ? 'primary' : '' }}"
        [title]="'Filter by data' | translate"
        (click)="toggleCurrentFilter($event, 'DATA')"
      >
        <i class="fa fa-database mr-2"></i>
        <span>{{ 'Data' | translate }}</span>
        <i
          class="fa {{
            selectedFilter === 'DATA' ? 'fa-caret-up' : 'fa-caret-down'
          }} ml-2"
        ></i>
      </button>
      <!--end of data filter button-->


      <!--Validation Rule Group filter button-->
      <button
        mat-stroked-button
        class="selection-filter-btn"
        *ngIf="selectionFilterConfig?.showValidationRuleGroupFilter"
        color="{{ selectedFilter === 'VALIDATIONRULEGROUP' ? 'primary' : '' }}"
        [title]="'Filter by Validation Rule Group' | translate"
        (click)="toggleCurrentFilter($event, 'VALIDATIONRULEGROUP')"
      >
        <i class="fa fa-object-group mr-2"></i>
        <span>{{ 'VR-Group' | translate }}</span>
        <i
          class="fa {{
            selectedFilter === 'VALIDATIONRULEGROUP' ? 'fa-caret-up' : 'fa-caret-down'
          }} ml-2"
        ></i>
      </button>
      <!--end of Validation Rule Group filter button-->

      <!--period filter button-->
      <button
        mat-stroked-button
        class="selection-filter-btn"
        *ngIf="selectionFilterConfig?.showPeriodFilter"
        color="{{ selectedFilter === 'PERIOD' ? 'primary' : '' }}"
        [title]="'Filter by period' | translate"
        (click)="toggleCurrentFilter($event, 'PERIOD')"
      >
        <i class="fa fa-clock-o mr-2"></i>
        <span>{{ 'Period' | translate }}</span>
        <i
          class="fa {{
            selectedFilter === 'PERIOD' ? 'fa-caret-up' : 'fa-caret-down'
          }} ml-2"
        ></i>
      </button>
      <!--end of period filter button-->

      <!--org unit filter button-->
      <button
        mat-stroked-button
        class="selection-filter-btn"
        *ngIf="selectionFilterConfig?.showOrgUnitFilter"
        color="{{ selectedFilter === 'ORG_UNIT' ? 'primary' : '' }}"
        [title]="'Filter by organisation unit' | translate"
        (click)="toggleCurrentFilter($event, 'ORG_UNIT')"
      >
        <i class="fa fa-sitemap mr-2"></i>
        <span>{{ 'Org-Unit' | translate }}</span>
        <i
          class="fa {{
            selectedFilter === 'ORG_UNIT' ? 'fa-caret-up' : 'fa-caret-down'
          }} ml-2"
        ></i>
      </button>
      <!--end of org unit filter button-->
    </div>
  </div>
  <!--end of selection filter header-->

  <!--selection filter body-->
  <mat-card
    class="selection-filter-body"
    *ngIf="selectedFilter !== '' && showFilterBody"
  >
    <!--data filter-->
    <ngx-dhis2-data-filter
      *ngIf="selectedFilter === 'DATA'"
      [selectedItems]="selectedData"
      (close)="onFilterClose($event, 'DATA')"
      (update)="onFilterUpdate($event, 'DATA')"
    ></ngx-dhis2-data-filter>
    <!--end of data filter-->

    <!--Validation Rule Group filter-->
    <lib-ngx-dhis2-validation-rule-filter
      *ngIf="selectedFilter === 'VALIDATIONRULEGROUP'"
      [dataSelection]='dataSelections' 
      (update)="onUpdateValidationRuleGroup($event, 'VALIDATIONRULEGROUP')"
      (close)="onUpdateValidationRuleGroup($event, 'VALIDATIONRULEGROUP')">
    </lib-ngx-dhis2-validation-rule-filter>
    <!--end of Validation Rule Group filter-->

    <!--period filter-->
    <ngx-dhis2-period-filter
      *ngIf="selectedFilter === 'PERIOD'"
      [selectedPeriods]="selectedPeriods"
      (close)="onFilterClose($event, 'PERIOD')"
      (update)="onFilterUpdate($event, 'PERIOD')"
    ></ngx-dhis2-period-filter>
    <!--end of period filter-->

    <!--org unit filter-->
    <ngx-dhis2-org-unit-filter
      *ngIf="selectedFilter === 'ORG_UNIT'"
      [orgUnitFilterConfig]="selectionFilterConfig?.orgUnitFilterConfig"
      [selectedOrgUnitItems]="selectedOrgUnits"
      (orgUnitUpdate)="onFilterUpdate($event, 'ORG_UNIT')"
      (orgUnitClose)="onFilterClose($event, 'ORG_UNIT')"
    ></ngx-dhis2-org-unit-filter>
    <!--end of org unit filter-->
  </mat-card>
  <!--end of selection filter body-->
</div>
